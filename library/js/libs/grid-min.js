!function t(){d3.layout.grid=function(t){var n={},r=d3.dispatch("tick"),e=0,i=[],u={},a=500,o=500,c=a/o,d=50,f=0,s=.02,g=d3.ease("linear"),h=[0,0],y,l,x,p,M;return n.sort=function(t){return arguments.length?(x=t,n):x},n.align=function(t){return arguments.length?(h=Array.isArray(t)?t:[t,t],h[0]=.5*h[0]+.5,h[1]=.5*h[1]+.5,n):t},n.width=function(t){return arguments.length?(c=a/o,a=t,n):a},n.height=function(t){return arguments.length?(c=a/o,o=t,n):o},n.rows=function(){return p},n.cols=function(){return M},n.size=function(){return[y,l]},n.speed=function(t){return arguments.length?(s=t,n):s},n.radius=function(t){return arguments.length?(d=t/2,n):d},n.add=function(t){for(var r=0,e=t.length;r<e;r+=1)n.push(t[r],!0);return n.update()},n.push=function(t,r){if("object"!=typeof t&&(t={id:t}),t.id=String(t.id||e++),!u[t.id])return t.x=t.x||a/2,t.y=t.y||o/2,t.sx=t.sx||a/2,t.sy=t.sy||o/2,t.gx=t.gx||a/2,t.gy=t.gy||o/2,u[t.id]=t,i.push(t),r?n:n.update()},n.update=function(){var t=i.length;p=Math.max(Math.floor(Math.sqrt(t*o/a)),1),M=Math.ceil(t/p),y=Math.min(a,d*M),l=Math.min(o,d*p);var r=(a-y)*h[0],e=(o-l)*h[1],u=0,c;x&&i.sort(x);t:for(var s=.5;s<M;s+=1)for(var g=.5;g<p;g+=1,u+=1){if(!(c=i[u]))break t;c.gy=r+y*s/M,c.gx=e+l*g/p,c.sx=c.x,c.sy=c.y}return d3.timer(n.tick),f=1,n},n.nodes=function(t){return arguments.length?(i=t,n):i},n.ease=function(t){return arguments.length?(g="function"==typeof t?t:d3.ease.apply(d3,Array.prototype.slice.call(arguments)),n):t},n.tick=function(){for(var t=i.length,n,e=g(f*f);t--;)n=i[t],n.x=e*(n.sx-n.gx)+n.gx,n.y=e*(n.sy-n.gy)+n.gy,Math.abs(n.x)<1e-4&&(n.x=0),Math.abs(n.y)<1e-4&&(n.y=0);if(r.tick({type:"tick"}),f<0)return!0;f-=s},n.add(t||[]),d3.rebind(n,r,"on")},d3.layout.grid}();