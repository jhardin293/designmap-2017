!function(t){"use strict";function i(t,i){for(var e in i)i.hasOwnProperty(e)&&(t[e]=i[e]);return t}function e(t,i,e){var n;return function(){var s=this,a=arguments,o=function(){n=null,e||t.apply(s,a)},r=e&&!n;clearTimeout(n),n=setTimeout(o,i),r&&t.apply(s,a)}}function n(t,e){this.DOM={},this.DOM.el=t,this.options=i({},this.options),i(this.options,e),this._init()}var s={width:t.innerWidth,height:t.innerHeight};n.prototype.options={movable:"all",layout:"vertical",animeduration:1300,animeeasing:"easeOutExpo",animedelay:0,onOpenTab:function(t,i){return!1},onCloseTab:function(t,i){return!1},onOpenBarsUpdate:function(t,i,e){return!1}},n.prototype._init=function(){this.DOM.tabs=[].slice.call(this.DOM.el.querySelectorAll(".tabsnav__item")),this.DOM.bars=[].slice.call(this.DOM.el.querySelectorAll(".tabsnav__bar")),this.totalTabs=this.DOM.tabs.length,this.extraEl=document.querySelector(this.options.extramovable),this._initEvents()},n.prototype._initEvents=function(){var i=this;this._openTabFn=function(t){i.isOpen||i._openTab(t.target)},this.DOM.tabs.forEach(function(t){t.addEventListener("click",i._openTabFn)}),this.debounceResizeFn=e(function(){i._resize()},10),t.addEventListener("resize",this.debounceResizeFn)},n.prototype._openTab=function(t){if(this.isAnimating)return!1;this.isAnimating=!0,this.current=this.DOM.tabs.indexOf(t);var i=t.getBoundingClientRect(),e={left:i.left,top:i.top,width:i.width,height:i.height},n=this;this.dim={measure:"vertical"===this.options.layout?e.width:e.height,position:"vertical"===this.options.layout?e.left:e.top,win:"vertical"===this.options.layout?s.width:s.height},this.DOM.bars.forEach(function(t){}),this.DOM.tabs.forEach(function(t,i){t.style.zIndex=i===n.current?100:1});var a={targets:"all"===this.options.movable?this.DOM.tabs:this.DOM.tabs[this.current]},o={targets:"all"===this.options.movable?this.DOM.bars:this.DOM.bars[this.current]},r=function(t,i,e){if(1===e||0===n.options.animedelay)return 0;var s=e+1,a=Math.floor(s/2);return n.current>=a?i<=n.current?i*n.options.animedelay:(s-i-1)*n.options.animedelay:i<n.current?i*n.options.animedelay:(s-i-1)*n.options.animedelay},h=function(t,i,e){if(i===n.current||1===e)return-1*n.dim.position;var s=1;return i>n.current?n.dim.win-(n.dim.position+n.dim.measure)-1:-1*n.dim.position+1},l=function(t,i,e){if(0===n.current){return document.querySelector(".homescreen").clientHeight}return s.height};if(a.duration=o.duration=this.options.animeduration,a.easing=o.easing=this.options.animeeasing,a.delay=o.delay=r,o["vertical"===this.options.layout?"width":"height"]=l,a.complete=function(){n.isAnimating=!1,n.isOpen=!0,n.options.onOpenTab(n.current,t)},o.update=function(i){n.options.onOpenBarsUpdate(i,n.current,t)},anime(a),anime(o),this.extraEl){var u={targets:this.extraEl,duration:this.options.animeduration,easing:this.options.animeeasing,delay:0},c=this.extraEl.getBoundingClientRect(),p="vertical"===this.options.layout?this.dim.win-(this.dim.position+this.dim.measure)+Math.abs(c.left-this.dim.position)+this.dim.measure:-1*this.dim.position;u["vertical"===this.options.layout?"translateX":"translateY"]=p,anime(u)}},n.prototype._closeTab=function(t){if(this.isAnimating)return!1;this.isAnimating=!0;var i=this,e={targets:"all"===this.options.movable?this.DOM.tabs:this.DOM.tabs[this.current]},n={targets:"all"===this.options.movable?this.DOM.bars:this.DOM.bars[this.current]},s=function(t,e,n){return 1===n||0===i.options.animedelay?0:Math.abs(i.current-e)*i.options.animedelay};if(e.duration=n.duration=this.options.animeduration,e.easing=n.easing=this.options.animeeasing,e.delay=n.delay=s,n["vertical"===this.options.layout?"width":"height"]=1,e.complete=function(){t.style.zIndex=1,i.isAnimating=!1,i.isOpen=!1,i.options.onCloseTab(i.current,t)},anime(e),anime(n),this.extraEl){var a={targets:this.extraEl,duration:this.options.animeduration,easing:this.options.animeeasing,delay:Math.abs(this.current-this.totalTabs)*this.options.animedelay};a["vertical"===this.options.layout?"translateX":"translateY"]=0,anime(a)}},n.prototype.close=function(t){this._closeTab(t||this.DOM.tabs[this.current])},n.prototype.show=function(t){var i=this;this.isVisible=!0,this.DOM.tabs.forEach(function(t){var i=t.querySelector(".tabsnav__bar"),e=t.querySelector(".tabsnav__title")}),this.DOM.el.classList.remove("tabsnav--hidden"),anime.remove(this.DOM.bars);var e={targets:this.DOM.bars,duration:500,delay:function(t,i){return 50*i},easing:"easeOutExpo",complete:function(){"function"==typeof t&&t.call()}};e["vertical"===this.options.layout?"width":"height"]=[0,1],anime(e);var n=this.DOM.el.querySelectorAll(".tabsnav__title");anime.remove(n);var s={targets:n,duration:500,delay:function(t,i){return 50*i},easing:"easeOutExpo",opacity:[0,1]}},n.prototype.hide=function(t){var i=this;this.isVisible=!1,this.DOM.bars.forEach(function(t){}),anime.remove(this.DOM.bars);var e={targets:this.DOM.bars,duration:500,easing:"easeOutExpo",delay:function(t,i,e){return 50*(e-i-1)},complete:function(){i.DOM.el.classList.add("tabsnav--hidden"),i.DOM.tabs.forEach(function(t){var i=t.querySelector(".tabsnav__bar"),e=t.querySelector(".tabsnav__title")}),"function"==typeof t&&t.call()}};e["vertical"===this.options.layout?"width":"height"]=[1,0],anime(e);var n=this.DOM.el.querySelectorAll(".tabsnav__title");anime.remove(n);var s={targets:n,duration:100,delay:function(t,i,e){return 50*(e-i-1)},easing:"linear",opacity:[1,0]};anime(s)},n.prototype.toggleVisibility=function(){if(this.isAnimating)return!1;this.isAnimating=!0;var t=this,i=function(){t.isAnimating=!1};return this.isVisible?(this.hide(i),0):(this.show(i),1)},n.prototype._resize=function(){var i=this;if(s={width:t.innerWidth,height:t.innerHeight},this.isOpen){this.dim.win="vertical"===this.options.layout?s.width:s.height;var e=this.DOM.tabs[this.current],n="vertical"===this.options.layout?"width":"height";this.DOM.tabs.forEach(function(t,e){if("all"===i.options.movable||"single"===i.options.movable&&e===i.current){var n=i.DOM.bars[e],a,o;if(e===i.current)if(a=-1*i.dim.position,0===i.current){var r=document.querySelector(".homescreen").clientHeight;o=r}else o=s.height;else a=e>i.current?i.dim.win-(i.dim.position+i.dim.measure):-1*i.dim.position,o=1;n.style.height=o+"px",0===i.current&&(document.querySelector(".homepage-proper").style.paddingTop=o+"px")}}),this.extraEl&&(this.extraEl.style.transform=translateStr+"("+("vertical"===this.options.layout?this.dim.win-(this.dim.position+this.dim.measure):-1*this.dim.position)+"px)")}},t.TabsNav=n}(window);